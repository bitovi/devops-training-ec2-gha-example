name: Deploy EKS Cluster

on:
  push:
    branches: [ deploy-eks ]
      

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: bitovi/github-actions-deploy-eks@deploy-eks
      

    # - name: Install Terraform
    #   uses: hashicorp/setup-terraform@v2
    #   with:
    #     terraform_version: 1.1.7

    # - name: Terraform Init
    #   id: init
    #   working-directory: terraform
    #   run: terraform init

    # - name: Terraform Validate
    #   id: validate
    #   working-directory: terraform
    #   run: terraform validate -no-color  
          
    # - name: Terraform Plan
    #   id: plan
    #   working-directory: terraform
    #   run: terraform plan -no-color     

    # - run: echo ${{ steps.plan.outputs.stdout }}
    # - run: echo ${{ steps.plan.outputs.stderr }}
    # - run: echo ${{ steps.plan.outputs.exitcode }}

    # - name: Terraform Apply
    #   uses: hashicorp/terraform-github-actions@master
    #   with:
    #     args: apply -auto-approve tfplan
    #   env:
    #     aws_access_key_id: ${{ secrets.AWS_ACCESS_KEY_ID_SANDBOX}}
    #     aws_secret_access_key: ${{ secrets.AWS_SECRET_ACCESS_KEY_SANDBOX}}
